(window["webpackJsonproataway-web"]=window["webpackJsonproataway-web"]||[]).push([[0],{103:function(e,t,n){e.exports=n.p+"static/media/neutral-human.67afdfae.svg"},111:function(e){e.exports=JSON.parse('{"label.title":"Roata W\u0103y","label.pickRoute":"Pick route","explanation.pickRoute":"Choose a route","label.myLocation":"My location"}')},112:function(e){e.exports=JSON.parse('{"label.title":"Roata W\u0103y","label.pickRoute":"Alege ruta","explanation.pickRoute":"Alege o rut\u0103","label.myLocation":"Loca\u021bia mea"}')},113:function(e){e.exports=JSON.parse('{"label.title":"Roata W\u0103y","label.pickRoute":"\u0412\u044b\u0431\u0435\u0440\u0438 \u043c\u0430\u0440\u0448\u0440\u0443\u0442","explanation.pickRoute":"\u041d\u0430\u0436\u043c\u0438 \u043d\u0430 \u043a\u043d\u043e\u043f\u043a\u0443, \u043f\u043e\u043b\u0443\u0447\u0438\u0448\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442","label.myLocation":"\u041c\u043e\u0451 \u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435"}')},128:function(e,t,n){e.exports=n(179)},142:function(e,t,n){},174:function(e,t,n){var a={"./route_1_segments.json":[184,1],"./route_2_segments.json":[185,3],"./route_38_segments.json":[186,5],"./route_39_segments.json":[187,7],"./route_3_segments.json":[188,9],"./route_40_segments.json":[189,11],"./route_41_segments.json":[190,13],"./route_42_segments.json":[191,15],"./route_44_segments.json":[192,17],"./route_45_segments.json":[193,19],"./route_46_segments.json":[194,21],"./route_47_segments.json":[195,23],"./route_48_segments.json":[196,25],"./route_49_segments.json":[197,27],"./route_4_segments.json":[198,29],"./route_52_segments.json":[199,31],"./route_53_segments.json":[200,33],"./route_54_segments.json":[201,35],"./route_55_segments.json":[202,37],"./route_56_segments.json":[203,39],"./route_57_segments.json":[204,41],"./route_58_segments.json":[205,43],"./route_59_segments.json":[206,45],"./route_5_segments.json":[207,47],"./route_60_segments.json":[208,49],"./route_61_segments.json":[209,51],"./route_62_segments.json":[210,53],"./route_64_segments.json":[211,55],"./route_65_segments.json":[212,57]};function o(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],o=t[0];return n.e(t[1]).then((function(){return n.t(o,3)}))}o.keys=function(){return Object.keys(a)},o.id=174,e.exports=o},175:function(e,t,n){var a={"./route_1_stations.json":[213,2],"./route_2_stations.json":[214,4],"./route_38_stations.json":[215,6],"./route_39_stations.json":[216,8],"./route_3_stations.json":[217,10],"./route_40_stations.json":[218,12],"./route_41_stations.json":[219,14],"./route_42_stations.json":[220,16],"./route_44_stations.json":[221,18],"./route_45_stations.json":[222,20],"./route_46_stations.json":[223,22],"./route_47_stations.json":[224,24],"./route_48_stations.json":[225,26],"./route_49_stations.json":[226,28],"./route_4_stations.json":[227,30],"./route_52_stations.json":[228,32],"./route_53_stations.json":[229,34],"./route_54_stations.json":[230,36],"./route_55_stations.json":[231,38],"./route_56_stations.json":[232,40],"./route_57_stations.json":[233,42],"./route_58_stations.json":[234,44],"./route_59_stations.json":[235,46],"./route_5_stations.json":[236,48],"./route_60_stations.json":[237,50],"./route_61_stations.json":[238,52],"./route_62_stations.json":[239,54],"./route_64_stations.json":[240,56],"./route_65_stations.json":[241,58]};function o(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],o=t[0];return n.e(t[1]).then((function(){return n.t(o,3)}))}o.keys=function(){return Object.keys(a)},o.id=175,e.exports=o},179:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(17),s=n.n(r),i=n(24),c=n(13),l=n(281),u=n(5),m=n(285),_=n(287),p=n(267),b=n(286),d=n(15),g=n.n(d),f=(n(141),n(18)),j=n(12),h=n(29),v=n(34),O=n(35),y=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(h.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={hasError:!1},n}return Object(O.a)(t,e),Object(j.a)(t,[{key:"componentDidCatch",value:function(e){console.log(e)}},{key:"render",value:function(){return this.state.hasError?null:this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(o.a.Component),E=(n(142),n(101)),w=n(102),S=n.n(w),k={login:"public_rtec",passcode:"iWillHackItInVisualBasic",host:"nazar",stomp:"https://rtec.dekart.com/webstomp",transport:"/exchange/e_public_rtec_Sho0ohCiephoh2waeM9t/state.transport.*",transportEx:"/exchange/e_public_rtec_Sho0ohCiephoh2waeM9t/telemetry.transport.*",station:"/exchange/e_public_rtec_Sho0ohCiephoh2waeM9t/state.station.*"},P=function(){function e(){Object(f.a)(this,e),this.client=Object(E.over)(new S.a(k.stomp),{debug:!1,heartbeat:!1}),this.subscription=void 0,this.subscriptionEx=void 0}return Object(j.a)(e,[{key:"connect",value:function(){var e=this;return new Promise((function(t,n){e.client.connect(k.login,k.passcode,t,n,k.host)}))}},{key:"subscribe",value:function(e){this.subscription=this.client.subscribe(k.transport,e),this.subscriptionEx=this.client.subscribe(k.transportEx,e)}},{key:"unsubscribe",value:function(){this.subscription.unsubscribe(),this.subscriptionEx.unsubscribe()}},{key:"disconnect",value:function(){this.client.disconnect()}}]),e}();function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(h.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={positions:{}},n.client=void 0,n.callback=function(e){var t=function(e){var t=e.headers.destination.split("."),n=t[t.length-1],a=JSON.parse(e.body),o=a.board||n,r=parseFloat(a.lat||a.latitude),s=parseFloat(a.lon||a.longitude),i=parseFloat(a.direction||a.dir),c=a.speed;return{board:o,lat:r,lng:s,direction:i,speed:c}}(e);if(t.board in n.state.positions){var a=n.state.positions[t.board].direction,o=t.direction-a;0===t.speed?t.direction=a:t.speed>0&&Math.abs(o)>30&&(t.direction-=o/2)}n.setState({positions:C({},n.state.positions,Object(u.a)({},t.board,t))})},n}return Object(O.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.client=new P,this.client.connect().then((function(){e.client.subscribe(e.callback)}))}},{key:"componentWillUnmount",value:function(){this.client.unsubscribe(),this.client.disconnect()}},{key:"render",value:function(){return(0,this.props.children)(this.state.positions)}}]),t}(o.a.Component);var R=n(103),I=n.n(R),D=new d.Icon({iconUrl:I.a,iconSize:[40,40]});function A(){var e=function(e){var t=Object(a.useState)(void 0),n=Object(c.a)(t,2),o=n[0],r=n[1],s=Object(a.useState)(void 0),i=Object(c.a)(s,2),l=i[0],u=i[1];return Object(a.useEffect)((function(){var t=navigator.geolocation.watchPosition(r,u,e);return function(){return navigator.geolocation.clearWatch(t)}}),[e]),[o,l]}(),t=Object(c.a)(e,2),n=t[0],r=t[1];if(!n||r)return null;var s=n.coords;return o.a.createElement(p.a,{position:[s.latitude,s.longitude],icon:D})}function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e){var t=e.selectedRoutes,a=e.showUserLocation,r=o.a.useState(!0),s=Object(c.a)(r,2),i=s[0],l=s[1],g=function(e){var t=o.a.useState({}),a=Object(c.a)(t,2),r=a[0],s=a[1],i=o.a.useState({}),l=Object(c.a)(i,2),m=l[0],_=l[1];return o.a.useEffect((function(){e.forEach((function(e){r[e]||n(174)("./route_".concat(e,"_segments.json")).then((function(t){return s((function(n){return B({},n,Object(u.a)({},e,t.default))}))})).catch(console.log),m[e]||n(175)("./route_".concat(e,"_stations.json")).then((function(t){return _((function(n){return B({},n,Object(u.a)({},e,t.default))}))})).catch(console.log)}))}),[r,m,e,e.size]),{routesSegments:r,routesStations:m}}(t),f=g.routesSegments,j=g.routesStations,h=o.a.useState({center:[47.0229,28.8353],zoom:13}),v=Object(c.a)(h,1)[0];return o.a.createElement(m.a,{id:"roata-way-hai-hai",style:{height:"100vh"},zoomControl:!1,maxZoom:19,onzoomstart:function(){return l(!1)},onzoomend:function(){return l(!0)},viewport:v},o.a.createElement(_.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),a&&o.a.createElement(A,null),o.a.createElement(M,null,(function(e){return Object.values(e).map((function(e){return o.a.createElement(p.a,{key:e.board,title:e.board,position:e,icon:Object(d.divIcon)({className:"arrow-container ".concat(i?"animated-marker":""),html:'<div class="arrow" style="transform: rotate('.concat(e.direction,'deg)"></div>')})})}))})),Object.entries(f).map((function(e){var n=Object(c.a)(e,2),a=n[0],r=n[1];return t.has(a)?o.a.createElement(y,{key:"route-segments-".concat(a)},o.a.createElement(b.a,{data:r})):void 0})),Object.entries(j).map((function(e){var n=Object(c.a)(e,2),a=n[0],r=n[1];return t.has(a)?o.a.createElement(y,{key:"route-stations-".concat(a)},o.a.createElement(b.a,{key:"route-stations-".concat(a),data:r,style:function(){return{title:"uniqueTitleqwe",iconSize:[25,41],iconAnchor:[12,41],color:"#00FF00",weight:.9,fillColor:"#1a1d62",fillOpacity:1}},onEachFeature:function(e,t){t.bindPopup(e.properties.tags.name)}})):void 0})))}var N=n(268),U=n(270),F=n(107),G=n.n(F),W=n(269),T=n(74),V=n(105),J=n(289),q=n(288),H=n(273),Z=n(283),$=n(271),K=Object(V.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},list:{width:250},formControl:{margin:e.spacing(3)}}}));function Q(){var e=Object(i.c)(),t=e.t,n=e.i18n,a=K(),r=o.a.useState(!1),s=Object(c.a)(r,2),l=s[0],u=s[1],m=o.a.useState(n.language),_=Object(c.a)(m,2),p=_[0],b=_[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(N.a,{position:"fixed"},o.a.createElement(W.a,null,o.a.createElement(U.a,{edge:"start",className:a.menuButton,color:"inherit","aria-label":"menu",onClick:function(){return u(!0)}},o.a.createElement(G.a,null)),o.a.createElement(T.a,{variant:"h6",className:a.title},t("label.title")))),o.a.createElement($.a,{open:l,onClose:function(){return u(!1)}},o.a.createElement("div",{className:a.list},o.a.createElement(J.a,{component:"fieldset",className:a.formControl},o.a.createElement(q.a,{"aria-label":"language",name:"language",value:p,onChange:function(e){b(e.target.value),localStorage.setItem("language",e.target.value),n.changeLanguage(e.target.value),u(!1)}},o.a.createElement(H.a,{value:"en",control:o.a.createElement(Z.a,{color:"primary"}),label:"English"}),o.a.createElement(H.a,{value:"ro",control:o.a.createElement(Z.a,{color:"primary"}),label:"Romanian"}),o.a.createElement(H.a,{value:"ru",control:o.a.createElement(Z.a,{color:"primary"}),label:"Russian"}))))))}var X=n(274),Y=n(110),ee=n.n(Y),te=n(109),ne=n.n(te),ae=n(284),oe=Object(V.a)((function(e){return{hudButtons:{position:"absolute",zIndex:e.zIndex.appBar,right:e.spacing(1),bottom:e.spacing(1)},topIcon:{marginBottom:e.spacing(1)}}}));function re(e){var t=e.isOpenRouteSelect,n=e.setIsOpenRouteSelect,a=e.setShowUserLocation,r=Object(i.c)().t,s=oe();return o.a.createElement("div",{className:s.hudButtons},"geolocation"in navigator&&o.a.createElement(ae.a,{title:r("label.myLocation"),placement:"left"},o.a.createElement(X.a,{color:"secondary","aria-label":r("label.myLocation"),className:s.topIcon,onClick:function(){return a(!0)}},o.a.createElement(ne.a,null))),o.a.createElement("br",null),o.a.createElement(ae.a,{title:r("label.pickRoute"),placement:"left"},o.a.createElement(X.a,{color:"secondary","aria-label":r("label.pickRoute"),onClick:function(){return n(!t)}},o.a.createElement(ee.a,null))))}var se=n(280),ie=n(276),ce=n(278),le=n(279),ue=n(277),me=n(182),_e=n(275),pe=[{id_upstream:"1",name_concise:"30",name_long:"Aeroport - Pia\u021ba Marii Adun\u0103ri Na\u021bionale",osm_relation:"7390177"},{id_upstream:"2",name_concise:"32",name_long:"str. 31 August 1989 - com. St\u0103uceni",osm_relation:"8649765"},{id_upstream:"39",name_concise:"37",name_long:"Gara Feroviar\u0103 - Bubuieci",osm_relation:"9478330"},{id_upstream:"40",name_concise:"36",name_long:"bd. \u0218tefan cel Mare \u0219i Sf\xe2nt - or. Ialoveni",osm_relation:"9478295"},{id_upstream:"41",name_concise:"35",name_long:"Durle\u0219ti - str. V. Alecsandri",osm_relation:"9478243"},{id_upstream:"42",name_concise:"34",name_long:"str. Ciuflea - com. Tru\u0219eni",osm_relation:"9220092"},{id_upstream:"38",name_concise:"31",name_long:"str. 31 August 1989 - or. S\xe2ngera",osm_relation:"8219936"},{id_upstream:"44",name_concise:"29",name_long:'Universitatea Agrar\u0103 - Gr\u0103dina public\u0103 \\"\u0218tefan cel Mare\\"',osm_relation:"6768372"},{id_upstream:"45",name_concise:"27",name_long:"str. Ceucari - str. Ion Creang\u0103",osm_relation:"6768261"},{id_upstream:"46",name_concise:"26",name_long:"str. Ceucari - str. Mircea cel B\u0103tr\xe2n",osm_relation:"6768260"},{id_upstream:"47",name_concise:"25",name_long:"str. Ceucari - str. 31 august 1989",osm_relation:"6768231"},{id_upstream:"48",name_concise:"24",name_long:"str. Mircea cel B\u0103tr\xe2n - str. Miori\u021ba",osm_relation:"6768200"},{id_upstream:"49",name_concise:"23",name_long:'str. Mircea cel B\u0103tr\xe2n - Parcul \\"La Izvor\\"',osm_relation:"6768158"},{id_upstream:"3",name_concise:"22",name_long:"str. Alba-Iulia - bd. Dacia",osm_relation:"6768073"},{id_upstream:"5",name_concise:"21",name_long:"str. Me\u0219terul Manole - str. Alba-Iulia",osm_relation:"6768055"},{id_upstream:"52",name_concise:"20",name_long:"Parcul de troilebuze nr.2 - str. V. Dokuceaev",osm_relation:"6767907"},{id_upstream:"53",name_concise:"17",name_long:"Gara Auto Sud-Vest - Gara Feroviar\u0103",osm_relation:"6767859"},{id_upstream:"54",name_concise:"13",name_long:"bd. Mircea cel B\u0103tr\xe2n - str. V. Dokuceaev",osm_relation:"6755788"},{id_upstream:"55",name_concise:"12",name_long:"bd. Mircea cel B\u0103tr\xe2n - str. A. Mateevici",osm_relation:"9220024"},{id_upstream:"56",name_concise:"11",name_long:'bd. Moscova - Parcul \\"La Izvor\\"',osm_relation:"6862391"},{id_upstream:"57",name_concise:"10",name_long:"bd. Moscova - str. Miori\u021ba",osm_relation:"6755732"},{id_upstream:"58",name_concise:"9",name_long:"Gara Auto Sud-Vest - Gara Auto Nord",osm_relation:"6754654"},{id_upstream:"59",name_concise:"8",name_long:'bd. Traian - Parcul \\"La Izvor\\"',osm_relation:"6754630"},{id_upstream:"60",name_concise:"7",name_long:"str. Uzinelor - str. 31 August 1989",osm_relation:"6754620"},{id_upstream:"61",name_concise:"5",name_long:"Parcul de troleibuze nr.2 - str. Bariera Sculeni",osm_relation:"6754537"},{id_upstream:"62",name_concise:"4",name_long:"bd. Dacia - str. Constitu\u021biei",osm_relation:"6754503"},{id_upstream:"4",name_concise:"3",name_long:"str. Alba-Iulia - str. Miori\u021ba",osm_relation:"6754451"},{id_upstream:"64",name_concise:"2",name_long:"bd. Traian - str. A. Pu\u0219kin",osm_relation:"6754453"},{id_upstream:"65",name_concise:"1",name_long:"or. Durle\u0219ti - str. Sarmizegetusa",osm_relation:"6768282"}].sort((function(e,t){return e.name_concise.localeCompare(t.name_concise,void 0,{numeric:!0})})),be=n(72),de=o.a.forwardRef((function(e,t){return o.a.createElement(me.a,Object.assign({direction:"up",ref:t},e))}));function ge(e){var t=e.isOpen,n=e.setOpen,a=e.setSelectedRoutes,r=e.selectedRoutes,s=Object(be.a)(),l=Object(_e.a)(s.breakpoints.down("xs")),u=Object(i.c)(),m=Object(c.a)(u,1)[0];return o.a.createElement(ie.a,{open:t,fullScreen:l,onClose:function(){return n(!1)},TransitionComponent:de,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(ue.a,{id:"alert-dialog-title"},m("explanation.pickRoute")),o.a.createElement(ce.a,null,o.a.createElement(le.a,{id:"alert-dialog-description"},pe.map((function(e){return o.a.createElement(se.a,{onClick:function(){return t=e.id_upstream,r.has(t)?r.delete(t):r.add(t),a(r),void n(!1);var t},color:"secondary",variant:r.has(e.id_upstream)?"outlined":"text",key:e.id_upstream},e.name_concise)})))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var fe=n(70),je={en:{translation:n(111)},ro:{translation:n(112)},ru:{translation:n(113)}};fe.a.use(i.b).init({resources:je,lng:"en",keySeparator:!1,interpolation:{escapeValue:!1}});var he=n(116),ve=n(282),Oe=n(114),ye=n.n(Oe),Ee=n(115),we=n.n(Ee);g.a.Marker.prototype.options.icon=g.a.icon({iconUrl:ye.a,shadowUrl:we.a});var Se=Object(he.a)();console.log("Starting v0.0.2"),s.a.render(a.createElement(a.StrictMode,null,a.createElement(a.Suspense,{fallback:null},a.createElement(i.a,{i18n:fe.a},a.createElement(ve.a,{theme:Se},a.createElement((function(){var e,t=Object(i.c)(),n=t.t,r=t.i18n;e=n("label.title"),Object(a.useEffect)((function(){document.title=e}),[e]);var s=Object(a.useState)(!1),u=Object(c.a)(s,2),m=u[0],_=u[1],p=Object(a.useState)(!1),b=Object(c.a)(p,2),d=b[0],g=b[1],f=Object(a.useState)(new Set),j=Object(c.a)(f,2),h=j[0],v=j[1];return Object(a.useEffect)((function(){var e=localStorage.getItem("language")||navigator.language.split("-")[0],t=r.hasResourceBundle(e,"translation")?e:"en";localStorage.setItem("language",t),r.changeLanguage(t)}),[r]),o.a.createElement(o.a.Fragment,null,o.a.createElement(l.a,null),o.a.createElement(Q,null),o.a.createElement(re,{isOpenRouteSelect:m,setIsOpenRouteSelect:_,setShowUserLocation:g}),o.a.createElement(ge,{isOpen:m,setOpen:_,selectedRoutes:h,setSelectedRoutes:v}),o.a.createElement(L,{selectedRoutes:h,showUserLocation:d}))}),null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[128,59,60]]]);
//# sourceMappingURL=main.09e7a592.chunk.js.map